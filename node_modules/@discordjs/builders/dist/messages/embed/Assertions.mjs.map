{"version":3,"file":"Assertions.mjs","sources":["../../../src/messages/embed/Assertions.ts"],"sourcesContent":["import { s } from '@sapphire/shapeshift';\nimport type { APIEmbedField } from 'discord-api-types/v10';\nimport { isValidationEnabled } from '../../util/validation';\n\nexport const fieldNamePredicate = s.string\n\t.lengthGreaterThanOrEqual(1)\n\t.lengthLessThanOrEqual(256)\n\t.setValidationEnabled(isValidationEnabled);\n\nexport const fieldValuePredicate = s.string\n\t.lengthGreaterThanOrEqual(1)\n\t.lengthLessThanOrEqual(1024)\n\t.setValidationEnabled(isValidationEnabled);\n\nexport const fieldInlinePredicate = s.boolean.optional;\n\nexport const embedFieldPredicate = s\n\t.object({\n\t\tname: fieldNamePredicate,\n\t\tvalue: fieldValuePredicate,\n\t\tinline: fieldInlinePredicate,\n\t})\n\t.setValidationEnabled(isValidationEnabled);\n\nexport const embedFieldsArrayPredicate = embedFieldPredicate.array.setValidationEnabled(isValidationEnabled);\n\nexport const fieldLengthPredicate = s.number.lessThanOrEqual(25).setValidationEnabled(isValidationEnabled);\n\nexport function validateFieldLength(amountAdding: number, fields?: APIEmbedField[]): void {\n\tfieldLengthPredicate.parse((fields?.length ?? 0) + amountAdding);\n}\n\nexport const authorNamePredicate = fieldNamePredicate.nullable.setValidationEnabled(isValidationEnabled);\n\nexport const imageURLPredicate = s.string\n\t.url({\n\t\tallowedProtocols: ['http:', 'https:', 'attachment:'],\n\t})\n\t.nullish.setValidationEnabled(isValidationEnabled);\n\nexport const urlPredicate = s.string\n\t.url({\n\t\tallowedProtocols: ['http:', 'https:'],\n\t})\n\t.nullish.setValidationEnabled(isValidationEnabled);\n\nexport const embedAuthorPredicate = s\n\t.object({\n\t\tname: authorNamePredicate,\n\t\ticonURL: imageURLPredicate,\n\t\turl: urlPredicate,\n\t})\n\t.setValidationEnabled(isValidationEnabled);\n\nexport const RGBPredicate = s.number.int\n\t.greaterThanOrEqual(0)\n\t.lessThanOrEqual(255)\n\t.setValidationEnabled(isValidationEnabled);\nexport const colorPredicate = s.number.int\n\t.greaterThanOrEqual(0)\n\t.lessThanOrEqual(0xffffff)\n\t.or(s.tuple([RGBPredicate, RGBPredicate, RGBPredicate]))\n\t.nullable.setValidationEnabled(isValidationEnabled);\n\nexport const descriptionPredicate = s.string\n\t.lengthGreaterThanOrEqual(1)\n\t.lengthLessThanOrEqual(4096)\n\t.nullable.setValidationEnabled(isValidationEnabled);\n\nexport const footerTextPredicate = s.string\n\t.lengthGreaterThanOrEqual(1)\n\t.lengthLessThanOrEqual(2048)\n\t.nullable.setValidationEnabled(isValidationEnabled);\n\nexport const embedFooterPredicate = s\n\t.object({\n\t\ttext: footerTextPredicate,\n\t\ticonURL: imageURLPredicate,\n\t})\n\t.setValidationEnabled(isValidationEnabled);\n\nexport const timestampPredicate = s.union(s.number, s.date).nullable.setValidationEnabled(isValidationEnabled);\n\nexport const titlePredicate = fieldNamePredicate.nullable.setValidationEnabled(isValidationEnabled);\n"],"names":[],"mappings":"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"}